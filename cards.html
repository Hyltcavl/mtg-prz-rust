
    <!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tradable cards</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tablesort/5.2.1/tablesort.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tablesort/5.2.1/sorts/tablesort.number.min.js"></script>
    <style> 
            table {
    border-collapse: collapse;
    width: 70%;
    margin: 0 auto;
}

th,
td {
    border: 1px solid #ddd;
    padding: 8px;
    text-align: left;
}

th {
    cursor: pointer;
    position: sticky;
    top: 0;
    background: white;
    z-index: 10;
    box-shadow: 0 2px 2px -1px rgba(0, 0, 0, 0.1);
}

th[role="columnheader"]:not(.no-sort):after {
    content: '';
    float: right;
    margin-top: 7px;
    border-width: 0 4px 4px;
    border-style: solid;
    border-color: #404040 transparent;
    visibility: hidden;
    opacity: 0;
    user-select: none;
}

th[aria-sort="ascending"]:not(.no-sort):after {
    border-bottom: none;
    border-width: 4px 4px 0;
}

th[aria-sort]:not(.no-sort):after {
    visibility: visible;
    opacity: 0.4;
}

th[role="columnheader"]:not(.no-sort):hover:after {
    visibility: visible;
    opacity: 1;
}

.card-image-container {
    position: relative;
    display: inline-block;
}

.card-image {
    width: 40px;
    height: auto;
    cursor: pointer;
}

.enlarged-image {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    max-width: 80vw;
    max-height: 80vh;
    width: auto;
    height: auto;
    z-index: 1000;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
}

.card-image-container:hover .enlarged-image {
    display: block;
}

.pagination {
    margin-top: 20px;
    text-align: center;
}

h1 {
    text-align: center;
    margin: 20px 0;
}

.filters {
    width: 70%;
    margin: 20px auto;
    padding: 10px;
    background: #f5f5f5;
    border-radius: 5px;
}

.filter-group {
    margin: 10px 0;
    display: flex;
    gap: 10px;
    align-items: center;
}

select,
button {
    padding: 5px;
    border-radius: 4px;
    border: 1px solid #ddd;
}

button {
    background: #4CAF50;
    color: white;
    border: none;
    padding: 6px 12px;
    cursor: pointer;
}

button:hover {
    background: #45a049;
}

.hidden {
    display: none;
}
    </style>
</head>

<body>
    <h1>Tradable cards</h1>
    
    <div class="filters">
        <div class="filter-group">
            <label for="rarityFilter">Rarity:</label>
            <select id="rarityFilter">
                <option value="all">All</option>
            </select>
            
            <label for="colorFilter">Color:</label>
            <select id="colorFilter">
                <option value="all">All</option>
            </select>
            
            <label for="minPriceFilter">Min Trade-in Price:</label>
            <input type="number" id="minPriceFilter" step="0.01" placeholder="0.00">
            
            <label for="minDiffFilter">Min % Diff:</label>
            <input type="number" id="minDiffFilter" step="0.01" placeholder="0.00">
            
            <button onclick="resetFilters()">Reset Filters</button>
            <button onclick="filterValueTrades()">Show Value Trades</button>
        </div>
        <input type="checkbox" id="valueTradeFilter" class="hidden">
    </div>

    <table id="card-table">
        <thead>
            <tr>
                <th class="no-sort">Image</th>
                <th>Name/Set</th>
                <th data-sort-method="number">Trade-in price</th>
                <th data-sort-method="number">MCM price</th>
                <th data-sort-method="number">Vendor requested amnt</th>
                <th data-sort-method="number">Tradable cards amnt</th>
                <th data-sort-method="string">Color</th>
                <th data-sort-method="string">Rarity</th>
                <th data-sort-method="number">% Diff</th>
            </tr>
        </thead>
        <tbody>
    
        <tr data-value-trade="true">
            <td>
                <div class="card-image-container ">
                    <img class="card-image" src="https://astraeus.dragonslair.se/images/130421/product" alt="Greenbelt Guardian">
                    <img class="enlarged-image" src="https://astraeus.dragonslair.se/images/130421/product" alt="Greenbelt Guardian">
                </div>
            </td>
            <td>Greenbelt Guardian/Aetherdrift </td>
            <td data-sort=2.00>2.00 SEK</td>
            <td data-sort=0.92>0.92 SEK</td>
            <td data-sort=3>3</td>
            <td data-sort=1>1</td>
            <td>"Green"</td>
            <td>Uncommon</td>
            <td data-sort=117.39>117.39%</td>
        </tr>
        
        <tr data-value-trade="true">
            <td>
                <div class="card-image-container ">
                    <img class="card-image" src="https://astraeus.dragonslair.se/images/130590/product" alt="Haunt the Network">
                    <img class="enlarged-image" src="https://astraeus.dragonslair.se/images/130590/product" alt="Haunt the Network">
                </div>
            </td>
            <td>Haunt the Network/Aetherdrift </td>
            <td data-sort=2.00>2.00 SEK</td>
            <td data-sort=0.81>0.81 SEK</td>
            <td data-sort=1>1</td>
            <td data-sort=1>1</td>
            <td>"Blue/Black"</td>
            <td>Uncommon</td>
            <td data-sort=148.45>148.45%</td>
        </tr>
        
        <tr data-value-trade="true">
            <td>
                <div class="card-image-container ">
                    <img class="card-image" src="https://astraeus.dragonslair.se/images/129873/product" alt="Sabotage Strategist">
                    <img class="enlarged-image" src="https://astraeus.dragonslair.se/images/129873/product" alt="Sabotage Strategist">
                </div>
            </td>
            <td>Sabotage Strategist/Aetherdrift </td>
            <td data-sort=2.00>2.00 SEK</td>
            <td data-sort=0.69>0.69 SEK</td>
            <td data-sort=1>1</td>
            <td data-sort=1>1</td>
            <td>"Blue"</td>
            <td>Uncommon</td>
            <td data-sort=189.86>189.86%</td>
        </tr>
        
        <tr data-value-trade="false">
            <td>
                <div class="card-image-container ">
                    <img class="card-image" src="https://astraeus.dragonslair.se/images/129924/product" alt="Stock Up">
                    <img class="enlarged-image" src="https://astraeus.dragonslair.se/images/129924/product" alt="Stock Up">
                </div>
            </td>
            <td>Stock Up/Aetherdrift </td>
            <td data-sort=2.00>2.00 SEK</td>
            <td data-sort=24.61>24.61 SEK</td>
            <td data-sort=4>4</td>
            <td data-sort=1>1</td>
            <td>"Blue"</td>
            <td>Uncommon</td>
            <td data-sort=0.00>0.00%</td>
        </tr>
        
        <tr data-value-trade="false">
            <td>
                <div class="card-image-container ">
                    <img class="card-image" src="https://astraeus.dragonslair.se/images/130402/product" alt="Dredger's Insight">
                    <img class="enlarged-image" src="https://astraeus.dragonslair.se/images/130402/product" alt="Dredger's Insight">
                </div>
            </td>
            <td>Dredger's Insight/Aetherdrift </td>
            <td data-sort=2.00>2.00 SEK</td>
            <td data-sort=3.45>3.45 SEK</td>
            <td data-sort=4>4</td>
            <td data-sort=1>1</td>
            <td>"Green"</td>
            <td>Uncommon</td>
            <td data-sort=0.00>0.00%</td>
        </tr>
        
        <tr data-value-trade="false">
            <td>
                <div class="card-image-container ">
                    <img class="card-image" src="https://astraeus.dragonslair.se/images/129738/product" alt="Nesting Bot">
                    <img class="enlarged-image" src="https://astraeus.dragonslair.se/images/129738/product" alt="Nesting Bot">
                </div>
            </td>
            <td>Nesting Bot/Aetherdrift </td>
            <td data-sort=2.00>2.00 SEK</td>
            <td data-sort=2.07>2.07 SEK</td>
            <td data-sort=4>4</td>
            <td data-sort=1>1</td>
            <td>"White"</td>
            <td>Uncommon</td>
            <td data-sort=0.00>0.00%</td>
        </tr>
        
        </tbody></table>
        <div class='pagination'></div>
        <script>
        // Initialize Tablesort
new Tablesort(document.getElementById('card-table'), {
    descending: true
});

// Function to populate filter dropdowns dynamically
function populateFilters() {
    const rows = document.querySelectorAll('#card-table tbody tr');
    const raritySet = new Set();
    const colorSet = new Set();

    // Collect unique values
    rows.forEach(row => {
        const rarity = row.querySelector('td:nth-child(8)').textContent.trim();
        const color = row.querySelector('td:nth-child(7)').textContent.trim();

        raritySet.add(rarity);
        colorSet.add(color);
    });

    // Populate rarity filter
    const rarityFilter = document.getElementById('rarityFilter');
    rarityFilter.innerHTML = '<option value="all">All</option>';
    Array.from(raritySet).sort().forEach(rarity => {
        rarityFilter.innerHTML += `<option value="${rarity}">${rarity}</option>`;
    });

    // Populate color filter
    const colorFilter = document.getElementById('colorFilter');
    colorFilter.innerHTML = '<option value="all">All</option>';
    Array.from(colorSet).sort().forEach(color => {
        colorFilter.innerHTML += `<option value='${color}'>${color}</option>`;
    });
}

// Filter function
function applyFilters() {
    const rarityFilter = document.getElementById('rarityFilter').value;
    const colorFilter = document.getElementById('colorFilter').value;
    const showValueTrades = document.getElementById('valueTradeFilter').checked;
    const minPriceFilter = parseFloat(document.getElementById('minPriceFilter').value) || 0;
    const minDiffFilter = parseFloat(document.getElementById('minDiffFilter').value) || 0;
    const rows = document.querySelectorAll('#card-table tbody tr');

    rows.forEach(row => {
        const rarity = row.querySelector('td:nth-child(8)').textContent.trim();
        const color = row.querySelector('td:nth-child(7)').textContent.trim();
        const tradeInPrice = parseFloat(row.querySelector('td:nth-child(3)').dataset.sort);
        const percentualDifference = parseFloat(row.querySelector('td:nth-child(9)').dataset.sort);
        const isValueTrade = row.dataset.valueTrade === 'true';

        const rarityMatch = rarityFilter === 'all' || rarity === rarityFilter;
        const colorMatch = colorFilter === 'all' || color === colorFilter;
        const minPriceMatch = tradeInPrice >= minPriceFilter;
        const minDiffMatch = percentualDifference >= minDiffFilter;

        if (rarityMatch && colorMatch && minPriceMatch && minDiffMatch && (!showValueTrades || isValueTrade)) {
            row.classList.remove('hidden');
        } else {
            row.classList.add('hidden');
        }
    });
}

// Reset filters
function resetFilters() {
    document.getElementById('rarityFilter').value = 'all';
    document.getElementById('colorFilter').value = 'all';
    document.getElementById('minPriceFilter').value = '';
    document.getElementById('valueTradeFilter').checked = false;
    document.getElementById('minDiffFilter').value = '';
    const rows = document.querySelectorAll('#card-table tbody tr');
    rows.forEach(row => row.classList.remove('hidden'));
}

// Filter value trades
function filterValueTrades() {
    document.getElementById('valueTradeFilter').checked = true;
    applyFilters();
}

// Initialize filters
populateFilters();

// Add event listeners to filters
document.getElementById('rarityFilter').addEventListener('change', applyFilters);
document.getElementById('colorFilter').addEventListener('change', applyFilters);
document.getElementById('valueTradeFilter').addEventListener('change', applyFilters);
document.getElementById('minPriceFilter').addEventListener('input', applyFilters);
document.getElementById('minDiffFilter').addEventListener('input', applyFilters);
        </script>
        </body>
    </html>
    